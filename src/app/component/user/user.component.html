<h1>Create User</h1>
<form [formGroup]="userForm" (ngSubmit)="createUser()">
  <div class="form-group">
    <label for="title">Title:</label>
    <input id="title" type="text" formControlName="title" required minlength="3" maxlength="100">
    <div *ngIf="userForm.get('title')?.invalid && (userForm.get('title')?.dirty || userForm.get('title')?.touched)">
      <div *ngIf="userForm.get('title')?.hasError('required')">Title is required.</div>
      <div *ngIf="userForm.get('title')?.hasError('minlength')">Title must be at least 3 characters long.</div>
      <div *ngIf="userForm.get('title')?.hasError('maxlength')">Title cannot exceed 100 characters.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="description">Description:</label>
    <textarea id="description" formControlName="description" required></textarea>
    <div *ngIf="userForm.get('description')?.invalid && (userForm.get('description')?.dirty || userForm.get('description')?.touched)">
      <div *ngIf="userForm.get('description')?.hasError('required')">Description is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="instructor">Instructor:</label>
    <input id="instructor" type="text" formControlName="instructor" required>
    <div *ngIf="userForm.get('instructor')?.invalid && (userForm.get('instructor')?.dirty || userForm.get('instructor')?.touched)">
      <div *ngIf="userForm.get('instructor')?.hasError('required')">Instructor is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="duration">Duration:</label>
    <input id="duration" type="text" formControlName="duration" required>
    <div *ngIf="userForm.get('duration')?.invalid && (userForm.get('duration')?.dirty || userForm.get('duration')?.touched)">
      <div *ngIf="userForm.get('duration')?.hasError('required')">Duration is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="startDate">Start Date:</label>
    <input id="startDate" type="date" formControlName="startDate" required>
    <div *ngIf="userForm.get('startDate')?.invalid && (userForm.get('startDate')?.dirty || userForm.get('startDate')?.touched)">
      <div *ngIf="userForm.get('startDate')?.hasError('required')">Start Date is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="endDate">End Date:</label>
    <input id="endDate" type="date" formControlName="endDate">
  </div>

  <div class="form-group">
    <label for="syllabus">Syllabus:</label>
    <textarea id="syllabus" formControlName="syllabus"></textarea>
  </div>

  <button type="submit" [disabled]="userForm.invalid" >Create</button>
  <button type="button" class="btn btn-primary" (click)="updateUser()" *ngIf="updatebtn" >Update</button> 
  <!-- [disabled]="!userForm.valid" -->

</form>

<hr>


<h1>Users</h1>
<table>
  <tr>
    <th>ID</th>
    <th>Title</th>
    <th>Description</th>
    <th>Instructor</th>
    <th>Duration</th>
    <th>Start Date</th>
    <th>End Date</th>
    <th>Syllabus</th>
    <th>Actions</th>
  </tr>
  <tr *ngFor="let user of users">
    <td>{{ user.id }}</td>
    <td>{{ user.title }}</td>
    <td>{{ user.description }}</td>
    <td>{{ user.instructor }}</td>
    <td>{{ user.duration }}</td>
    <td>{{ user.startDate | date }}</td>
    <td>{{ user.endDate | date }}</td>
    <td>{{ user.syllabus }}</td>
    <td>   
        <button type="button" (click)="getUserById(user.id)">Edit</button>
        <button (click)="deleteUser(user.id)">Delete</button>
      </td>
  </tr>
</table>

<div class="container">
  
    <h2>Search Users</h2>
  
    <form [formGroup]="searchByTitleForm">
      <div class="form-group">
        <label for="searchByTitle">Search by Title</label>
        <input type="text" formControlName="title" class="form-control" id="searchByTitle" required>
      </div>
      <button type="button" class="btn btn-primary" (click)="searchByTitle()">Search</button>
    </form>
  
     <hr>
  
    <form [formGroup]="searchByStartDateForm">
      <div class="form-group">
        <label for="searchByStartDate">Search by startDate</label>
        <input type="date"  formControlName="startDate" class="form-control" id="searchByStartDate" required>
      </div>
      <button type="button" class="btn btn-primary" (click)="searchByStartDate()">Search</button>
    </form>
  

    <!-- <div *ngIf="searchResult">
      <h3>Search Result</h3>
      <div>
        <strong>Title:</strong> {{ searchResult.title }}
      </div>
      <div>
        <strong>Description:</strong> {{ searchResult.description }}
      </div>         
      <div>
        <strong>Instructor:</strong> {{ searchResult.instructor }}
      </div>         
    </div> -->

    <div *ngIf="searchResults.length > 0">
      <h2>Search Results:</h2>
      <ul>
        <li *ngFor="let result of searchResults">
          <p>title: {{ result.title }}</p>
          <p>description: {{ result.description }}</p>
          <p>instructor: {{ result.instructor }}</p>
        </li>
      </ul>
    </div> 

  </div>
  



<!-- <h1>Search Users</h1>
<div>
  <label for="searchTitle">Search by Title:</label>
  <input id="searchTitle" type="text" [(ngModel)]="searchTitle">
  <button (click)="searchByTitle()">Search</button>
</div>

<div>
  <label for="searchStartDate">Search by Start Date:</label>
  <input id="searchStartDate" type="date" [(ngModel)]="searchStartDate">
  <button (click)="searchByStartDate()">Search</button>
</div>

<hr> -->

